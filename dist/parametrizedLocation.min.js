/*! parametrizedLocation - v0.2.0 - 2013-09-13
* https://plus.google.com/u/0/109953552136391486842
* Copyright (c) 2013 Peter Ahlers (eonlepapillon); Licensed MIT */
angular.module("parametrizedLocation",[]).config(["$provide",function(a){"use strict";function b(a){for(var b=a.split("/"),d=b.length;d--;)b[d]=c(b[d]);return b.join("/")}function c(a){return d(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function d(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function e(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function f(a,b,c){for(var d=e(a),f=0;f<d.length;f++)b.call(c,a[d[f]],d[f]);return d}function g(a,b){if(!b)return a;var c=[],d=a,e="";return a.split("#").length>1&&(d=a.slice(0,a.lastIndexOf("#")),e=a.slice(a.lastIndexOf("#"))),f(b,function(a,b){null!==a&&void 0!==a&&(angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){angular.isObject(a)&&(a=angular.toJson(a)),c.push(b+"="+a)}))}),d+(-1===d.indexOf("?")?"?":"&")+c.join("&")+e}function h(a,b,c){var d,e={},f={},h=!1;return angular.forEach(a.split(/\W/),function(b){!new RegExp("^\\d+$").test(b)&&b&&new RegExp("(^|[^\\\\]):"+b+"(\\W|$)").test(a)&&(e[b]=!0)}),a=a.replace(/\\:/g,":"),b=b||{},angular.forEach(e,function(c,e){d=b[e],a=angular.isDefined(d)&&null!==d?a.replace(new RegExp(":"+e+"(\\W|$)","g"),d+"$1"):a.replace(new RegExp("(/?):"+e+"(\\W|$)","g"),function(a,b,c){return"/"===c.charAt(0)?c:b+c})}),a=a.replace(/\/+$/,""),a=a.replace(/\/\.(?=\w+($|\?))/,"."),a=a.replace(/\/\\\./,"/."),angular.forEach(b,function(a,b){e[b]||(h=!0,f[b]=a)}),c&&h&&(a=g(a,f)),a}var i=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/;a.decorator("$location",["$delegate",function(a){var d=a.url,e=a.path,f=a.hash;return a.url=function(b,c,e){return angular.isObject(c)&&(e=c,c=void 0),angular.isObject(e)&&(b=h(b,e,!0)),d.call(a,b,c)},a.path=function(b,c){return angular.isObject(c)&&(b=h(b,c)),e.call(a,b)},a.hash=function(b,c){return angular.isObject(c)&&(b=h(b,c)),f.call(a,b)},a.composeUrl=function(a,d){if(!angular.isObject(d))return a;var e=i.exec(h(a,d,!0)),f="",g="",j="";return e[1]&&(f=b(e[1])),(e[2]||e[1])&&(g="?"+c(e[3]||"")),e[5]&&(j="#"+c(e[5])),f+g+j},a}])}]);