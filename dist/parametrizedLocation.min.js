/*! parametrizedLocation - v0.1.0 - 2013-09-10
* https://plus.google.com/u/0/109953552136391486842
* Copyright (c) 2013 Peter Ahlers (eonlepapillon); Licensed MIT */
angular.module("parametrizedLocation",[]).config(["$provide",function(a){"use strict";function b(a){return c(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function c(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function e(a,b,c){for(var e=d(a),f=0;f<e.length;f++)b.call(c,a[e[f]],e[f]);return e}function f(a,b){if(!b)return a;var d=[],f="";return a.split("#").length>1&&(a=a.slice(0,a.lastIndexOf("#")),f=a.slice(a.lastIndexOf("#")-1)),e(b,function(a,b){null!==a&&void 0!==a&&(angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){angular.isObject(a)&&(a=angular.toJson(a)),d.push(c(b)+"="+c(a))}))}),a+(-1===a.indexOf("?")?"?":"&")+d.join("&")+f}function g(a,c,d){var e,g,h={},i={},j=!1;return angular.forEach(a.split(/\W/),function(b){!new RegExp("^\\d+$").test(b)&&b&&new RegExp("(^|[^\\\\]):"+b+"(\\W|$)").test(a)&&(h[b]=!0)}),a=a.replace(/\\:/g,":"),c=c||{},angular.forEach(h,function(d,f){e=c[f],angular.isDefined(e)&&null!==e?(g=b(e),a=a.replace(new RegExp(":"+f+"(\\W|$)","g"),g+"$1")):a=a.replace(new RegExp("(/?):"+f+"(\\W|$)","g"),function(a,b,c){return"/"===c.charAt(0)?c:b+c})}),a=a.replace(/\/+$/,""),a=a.replace(/\/\.(?=\w+($|\?))/,"."),a=a.replace(/\/\\\./,"/."),angular.forEach(c,function(a,b){h[b]||(j=!0,i[b]=a)}),d&&j&&(a=f(a,i)),a}a.decorator("$location",["$delegate",function(a){var b=a.url,c=a.path,d=a.hash;return a.url=function(c,d,e){return angular.isObject(d)&&(e=d,d=void 0),angular.isObject(e)&&(c=g(c,e,!0)),b.call(a,c,d)},a.path=function(b,d){return angular.isObject(d)&&(b=g(b,d)),c.call(a,b)},a.hash=function(b,c){return angular.isObject(c)&&(b=g(b,c)),d.call(a,b)},a}])}]);